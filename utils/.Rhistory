x = data.frame(a = c(1,2,3), b = c(1,2,3))
reshape2::melt(n.all)
n.all = data.frame(all = c(28,51,22,65),
part = c(3,21,8,14))
n.all = data.frame(all = c(28,51,22,65),
reshape2::melt(n.all)
n.all = data.frame(all = c(28,51,22,65),
part = c(3,21,8,14)
inst = c('IMBA', 'IMP', 'GMI', 'MPL'))
n.all = data.frame(all = c(28,51,22,65),
part = c(3,21,8,14),
inst = c('IMBA', 'IMP', 'GMI', 'MPL'))
n.all = reshape2::melt(n.all)
n.all
n.all
n.all %>%
group_by(inst) %>%
mutate(Percent = value / sum(value)) %>%
ungroup()
n.all = data.frame(all = c(28,51,22,65),
part = c(3,21,8,14),
inst = c('IMBA', 'IMP', 'GMI', 'MPL'))
n.all = reshape2::melt(n.all)
n.all %>%
group_by(inst) %>%
mutate(Percent = value / sum(value)) %>%
ungroup()
library(tidyverse)
n.all <- n.all %>%
group_by(inst) %>%
mutate(Percent = value / sum(value)) %>%
ungroup()
n.all
p = ggplot(n.all, aes(x = factor(variable), y = inst, fill = Percent)) +
geom_tile() +
geom_text(aes(label = sprintf("%d (%0.2f)", value, Percent)), color = "black", size = 3) +
# geom_text(aes(label = sprintf("%0.2f", Percent)), color = "black", size = 3) +
scale_fill_gradientn(colours = c( "white","#FFF2D8", "#B0A695", "#776B5D")) +
labs(x = "Comfortable talking to your PI about it",
y = "Stress, anxiety, depression", fill = '% in column') +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
p
n.all = data.frame(all = c(28,51,22,65),
part = c(13,21,8,14),
inst = c('IMBA', 'IMP', 'GMI', 'MPL'))
n.all = reshape2::melt(n.all)
n.all <- n.all %>%
group_by(inst) %>%
mutate(Percent = value / sum(value)) %>%
ungroup()
p = ggplot(n.all, aes(x = factor(variable), y = inst, fill = Percent)) +
geom_tile() +
geom_text(aes(label = sprintf("%d (%0.2f)", value, Percent)), color = "black", size = 3) +
# geom_text(aes(label = sprintf("%0.2f", Percent)), color = "black", size = 3) +
scale_fill_gradientn(colours = c( "white","#FFF2D8", "#B0A695", "#776B5D")) +
labs(x = "Comfortable talking to your PI about it",
y = "Stress, anxiety, depression", fill = '% in column') +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
p
n.all
n.all = data.frame(all = c(28,51,22,65),
part = c(13,21,8,14),
inst = c('IMBA', 'IMP', 'GMI', 'MPL'))
n.all
n.all$p =  n.all$part /  n.all$all
n.all = reshape2::melt(n.all)
n.all
n.all
n.all = data.frame(all = c(28,51,22,65),
part = c(13,21,8,14),
inst = c('IMBA', 'IMP', 'GMI', 'MPL'))
n.all = data.frame(all = c(28,51,22,65),
part = c(13,21,8,14),
inst = c('IMBA', 'IMP', 'GMI', 'MPL'))
# n.all$p =  n.all$part /  n.all$all
n.all = reshape2::melt(n.all)
n.all <- n.all %>%
group_by(inst) %>%
mutate(Percent = value / sum(value[1])) %>%
ungroup()
n.all
8/22
p = ggplot(n.all, aes(x = factor(variable), y = inst, fill = Percent)) +
geom_tile() +
geom_text(aes(label = sprintf("%d (%0.2f)", value, Percent)), color = "black", size = 3) +
# geom_text(aes(label = sprintf("%0.2f", Percent)), color = "black", size = 3) +
scale_fill_gradientn(colours = c( "white","#FFF2D8", "#B0A695", "#776B5D")) +
labs(x = "Comfortable talking to your PI about it",
y = "Stress, anxiety, depression", fill = '% in column') +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
p
n.all = data.frame(all = c(28,51,22,65),
part = c(13,21,8,14),
inst = c('IMBA', 'IMP', 'GMI', 'MPL'))
n.all
n.all$p =  n.all$part /  n.all$al
n.all$p =  n.all$part /  n.all$all
n.all
if (!require("readxl", character.only = T, quietly = T)) {
install.packages("readxl", quiet = T)
}
library(readxl)
if(!require(ggplot2)) install.packages("ggplot2")
library(ggplot2)
if (!require("tidyverse")) install.packages("tidyverse")
library(tidyverse)
path.figures = 'figures/'
data <- read_excel("POSTDOC SURVEY 2023 (Responses) - Form responses 1.xlsx")
data <- as.data.frame(data)
data = data[,colSums(is.na(data)) == 0]
n = ncol(data)
data = data[order(data$`How long have you been a postdoc at VBC?`),]
data = data[order(data$`What is your gender?`),]
data = data[order(data$`Your institute:`),]
df.sup = data[,10 + (1:7)]
colnames(df.sup)
df.sup = data[,27:37]
colnames(df.sup)
df.sup = data[,c(44:49)]
colnames(df.sup)
df.sup = data[,55:57]
colnames(df.sup)
